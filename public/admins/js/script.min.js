$(document).ready(function(){function e(){$(".my-model").html('<i class="fa fa-spin fa-spinner font-22 margin-15"></i>'),$(".my-model").addClass("text-center"),$("#myModal").modal("show"),$.ajax({type:"GET",url:$("#discount_list_url").val(),dataType:"json",success:function(e){"success"==e.status&&($(".my-model").removeClass("text-center"),$("#myModal").find(".my-model").html(e.html),$("#myModal").find(".remove_dicount").remove(),$("#myModal .modal-header").removeClass("hide"),$("#myModal .modal-footer").removeClass("hide"))}})}function a(e){var a=$("#table_name").val(),t="",s=$("#folder_name").val();t=""==s?"table_name="+a+"&id="+e:"table_name="+a+"&id="+e+"&folder_name="+s,$.ajax({type:"GET",url:$("#delete_url").val(),data:t,dataType:"json",success:function(t){"Success"==t.status?("Category"==a||"Menu"==a?$(e).each(function(){$(".cat-"+this).remove()}):$(e).each(function(){$("#row-"+this).remove()}),$("#multi-action i").addClass("hide"),$("#multi-action").removeClass("disabled"),notify(t.message,"success")):(notify(t.message,"success"),$(".delete_row").removeClass("disabled"),$(".delete_row").html('<i class="fa fa-times"></i>'))}})}function t(e,a,t){var s=$("#table_name").val();$(e).each(function(){$("#"+a+"-"+this).addClass("disabled"),$("#"+a+"-"+this).html('<i class="fa fa-spinner fa-spin"></i>')}),$.ajax({type:"GET",url:$("#status_url").val(),data:"id="+e+"&table_name="+s+"&field="+a+"&param="+t,dataType:"json",error:function(e){notify("Something went wrong","danger")},success:function(s){$(e).each(function(){"1"==t?(htmlsuc="on_home"==a?'<i class="fa fa-home green"></i>':'<i class="fa fa-check-square-o"></i>',$("#"+a+"-"+this).attr("href",a+"-1"),$("#"+a+"-"+this).html(htmlsuc)):(htmlsuc="on_home"==a?'<i class="fa fa-home black"></i>':'<i class="fa fa-square-o"></i>',$("#"+a+"-"+this).attr("href",a+"-0"),$("#"+a+"-"+this).html(htmlsuc)),$("#"+a+"-"+this).removeClass("disabled"),$("#multi-action i").addClass("hide"),$("#multi-action").removeClass("disabled")})}})}$(".toogle_bar").on("click",function(){$("body").hasClass("shrink_panel")?($("body").removeClass("shrink_panel"),setCookie("leftpanel_shrink","no","30")):($("body").addClass("shrink_panel"),setCookie("leftpanel_shrink","yes","30"))}),$(window).width()>768&&($(".drop > a").on("click",function(){$("body").hasClass("shrink_panel")||$(this).parent().find(".dropdown-menu").slideToggle("100",function(){$(this).parent().toggleClass("active","100")})}),$(".drop").not(".active").hover(function(){$("body").hasClass("shrink_panel")&&$(this).addClass("active")},function(){$("body").hasClass("shrink_panel")&&$(this).removeClass("active")})),$("#selectall").on("click",function(){var e=this.checked;$(".allcheckbox").each(function(){$(this).prop("checked",e)})}),$(document).on("click",".change_status",function(){var e=$(this),a=[],s=this.id.split("-");a.push(s[1]);var i="",n=e.attr("href").split("-");i="1"==n[1]?"0":"1";var l=n[0];return t(a,l,i),!1}),$(document).on("click",".imagedelete",function(){$(this);return confirm("Are you sure ?")&&$.ajax({type:"GET",url:$(this).attr("href"),dataType:"json",success:function(e){$("#image_display").html("")}}),!1}),$(document).on("click",".bannerdelete",function(){$(this);return confirm("Are you sure ?")&&$.ajax({type:"GET",url:$(this).attr("href"),dataType:"json",success:function(e){$("#banner_display").html("")}}),!1}),$(document).on("click",".delete_row",function(){if(confirm("Are you sure ?")){var e=$(this);e.addClass("disabled"),e.html('<i class="fa fa-spinner fa-spin"></i>');var t=[];delsplit=$(this).attr("href").split("-"),t.push(delsplit[1]),a(t)}return!1});var s=[];$(document).on("click","#multi-action",function(){if(""==$("#action").val())return notify("Please select an action","danger"),!1;if($(".allcheckbox:checked").length>0){var i=[];$(".allcheckbox").each(function(){$(this).is(":checked")&&i.push($(this).val())});var n=$("#action").val().split("-");if("delete"==$("#action").val())confirm("Are you sure ?")&&($("#multi-action i").removeClass("hide"),$("#multi-action").addClass("disabled"),a(i));else if("change"==n[0]){var l="";l=n[2];var o=n[1];$("#multi-action i").removeClass("hide"),$("#multi-action").addClass("disabled"),t(i,o,l)}else"discount"==$("#action").val()&&(e(),s=i)}else notify("Select any checkbox","danger")}),$(document).on("change",".add_discount",function(){if("discount"==$("#action").val()){var e=$("#table_name").val(),a="table_name="+e+"&ids="+s+"&discount_id="+$(this).data("id");$.ajax({type:"GET",url:$("#discount_url").val(),data:a,dataType:"json",success:function(e){"success"==e.status&&$("#myModal").modal("hide")}})}}),$(document).on("click",".view_more",function(){return $(".my-model").html('<i class="fa fa-spin fa-spinner font-22 margin-15"></i>'),$(".my-model").addClass("text-center"),$.ajax({type:"GET",url:$(this).attr("href"),dataType:"html",success:function(e){$(".my-model").removeClass("text-center"),$(".my-model").html(e)}}),$(".modal").modal("show"),!1}),$(document).on("click",".export_btn",function(){if($(this).hasClass("all_id"))return $(this).attr("href",e),!0;if($(".allcheckbox:checked").length>0){var e=$(this).attr("href"),a=[];return $(".allcheckbox").each(function(){$(this).is(":checked")&&a.push($(this).val())}),$(this).attr("href",e+"?id="+a),!0}return notify("Select any checkbox","danger"),!1}),setTimeout(function(){$("body").removeClass("loading_smooth")},300)});